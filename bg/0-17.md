# Полета (properties)

Структурите и класовете (общо казано: "типове") могат да имат техни собствени променливи и константи, наречени полета. Те ни позволяват да прикрепим стойности към типовете ни, за да бъдат уникални, но тъй като типовете могат да имат методи, може да ги накараме да действат, съобразявайки се със собствените си данни. 

Нека да видим следния пример:

    struct Person {
        var clothes: String
        var shoes: String

        func describe() {
            print("I like wearing \(clothes) with \(shoes)")
        }
    }

    let taylor = Person(clothes: "T-shirts", shoes: "sneakers")
    let other = Person(clothes: "short skirts", shoes: "high heels")
    taylor.describe()
    other.describe()


Както може да видим, когато ползваме дадено поле в метод, то автоматично ще използва стойността, която принадлежи на същия обект.

## Наблюдаване на полета

Swift ни позволява да добавим код, който ще се изпълни, когато едно поле ще бъде променено, или е било променено. Това често е добър начин да обновим потребителския интерфейс спрямо новата стойност на дадено поле.

Има два типа наблюдатели на полета: `willSet` (ще бъде зададено) и `didSet` (беше зададено) - те се извикват съотвено преди и след като на едно поле бъде зададена нова стойност. В `willSet` Swift ни предоставя константа, наречена `newValue`, която съдържа новата стойност, а при `didSet` може да използваме `oldValue`, която съдържа предишната стойност.

Нека да добавим два наблюдателя в `clothes` полето на `Person` структурата: 


    struct Person {
        var clothes: String {
            willSet {
                updateUI(msg: "I'm changing from \(clothes) to \(newValue)")
            }

            didSet {
                updateUI(msg: "I just changed from \(oldValue) to \(clothes)")
            }
        }
    }

    func updateUI(msg: String) {
        print(msg)
    }

    var taylor = Person(clothes: "T-shirts")
    taylor.clothes = "short skirts"

Това ще отпечата съобщенията "I'm changing from T-shirts to short skirts" и "I just changed from T-shirts to short skirts.".

## Изчислени полета

Възможно е да създадем полета, които всъщност са код зад завесите. Например, вече използвахме `uppercased()` метода на String, но също така има поле, наречено `capitalized`, което бива изчислено, когато е нужно, вместо през цялото време да съдържа в себе си версия само с главни букви. 

За да създадем изчислено поле, просто поставяме отваряща къдрава скоба след полето и използваме `get` или `set`, за да накараме действието да се изпълни в подходящо време. Например, ако искаме да добавим `ageInDogYears` поле, което автоматично връща възрастта на човек умножена по седем, трябва да направим следното: 

    struct Person {
        var age: Int

        var ageInDogYears: Int {
            get {
                return age * 7
            }
        }
    }

    var fan = Person(age: 25)
    print(fan.ageInDogYears)


Изчислените полета са все по-популярни в кода на Apple, но по-малко в потребителски код.

**Забележка:** Ако искаме да ги иползваме само за *четене* на данни, можем да премахнем `get` частта напълно, ето така:

    var ageInDogYears: Int {
        return age * 7
    }
